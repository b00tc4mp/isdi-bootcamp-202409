<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unsocial</title>

    <link rel="shortcut icon" href="https://b00tc4mp.com/favicon.ico" type="image/x-icon">

    <!-- //ESTILOS DE CADA SECCION/RAMA -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+Oriya:wght@400..700&family=Sixtyfour&family=Space+Grotesk:wght@300..700&family=Teko:wght@300..700&display=swap');

        html {
            display: flex;
            justify-content: center;
        }

        :root {

            --color: lavender;
            --font: 'Sixtyfour';
            font-family: var(--font);

        }

        body {
            background-color: black;
            color: var(--color);

            text-align: center;
            justify-content: center;
        }

        input {
            background-color: inherit;
            font-family: inherit;
            color: lavender;
            font-size: 32px;
        }

        a:visited {
            color: var(--color);
        }

        form {
            display: list-item;
        }

        .home {
            display: flex;
            flex-direction: column;
            width: 100%;

            text-align: center;
            justify-content: center;

            font-size: 200%;

        }

        .home h3 {
            font-size: 200%;
        }

        .login {
            display: flex;
            flex-direction: column;
            width: 100%;
            margin-top: 20%;

            text-align: center;
            justify-content: center;

            font-size: 200%;
        }

        .register {
            display: flex;
            flex-direction: column;
            width: 100%;
            margin-top: 10%;

            text-align: center;
            justify-content: center;

            font-size: 150%;
        }

        .res {
            text-align: center;
            justify-content: center;
        }

        #but {
            background-color: rgb(69, 69, 239);
            color: white;
            font-size: 26px;
            font-family: var(--font);
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
        }

        h2 {
            font-size: 500%;
        }

        label {
            font-size: 130%;
        }

        a {
            font-size: 200%;
        }

        .anchor {
            font-size: 300%;
        }
    </style>
</head>

<body>


    <script>
        //USUARIOS POR DEFECTO
        var users = [
            { name: 'Juan Pablo', email: 'juanpablo@gmail.com', username: 'juanpablo', password: '123' },
            { name: 'Aaron', email: 'aaron@gmail.com', username: 'aaron', password: '123' },
            { name: 'Anna', email: 'anna@gmail.com', username: 'anna', password: '123' },
            { name: 'Angel', email: 'Angel@gmail.com', username: 'angel', password: '123' },
            { name: 'Claudi', email: 'Claudi@gmail.com', username: 'claudi', password: '123' },
            { name: 'Javi', email: 'Javi@gmail.com', username: 'javi', password: '123' }
        ]

        //variable que te almacena datos del usuario loggeado
        var loggedInUser


        //CREACIÓN SECCIONES MEDIANTE JAVASCRIPT

        //----- LOGIN SECTION -----  
        var logInSection = document.createElement('section')
        var logInTitle = document.createElement('h2')
        logInTitle.innerText = 'Login'
        logInSection.appendChild(logInTitle)

        //FORMULARIO DEL LOGIN
        var loginForm = document.createElement('form')
        logInSection.appendChild(loginForm)

        //LOGIN USERNAME LABEL 
        var loginUsernameLabel = document.createElement('label')
        loginForm.appendChild(loginUsernameLabel)
        loginUsernameLabel.htmlFor = 'username'
        loginUsernameLabel.innerText = 'Username'

        //LOGIN USERNAME INPUT 
        var loginUsernameInput = document.createElement('input')
        loginForm.appendChild(loginUsernameInput)
        loginUsernameInput.type = 'text'
        loginUsernameInput.id = 'username'

        //LOGIN PASSWORD LABEL 
        var logInPasswordLabel = document.createElement('label')
        loginForm.appendChild(logInPasswordLabel)
        logInPasswordLabel.htmlFor = 'password'
        logInPasswordLabel.innerText = 'Password'

        //LOGIN PASSWORD INPUT 
        var logInPasswordInput = document.createElement('input')
        loginForm.appendChild(logInPasswordInput)
        logInPasswordInput.type = 'password'
        logInPasswordInput.id = 'password'

        //LOGIN SUBMIT BUTTON 
        var loginButton = document.createElement('button')
        loginForm.appendChild(loginButton)
        loginButton.innerText = 'Log In'
        loginButton.type = 'submit'
        loginButton.id = 'but'

        //LOGIN REGISTER ANCHOR 
        var loginResgisterAnchor = document.createElement('a')
        loginResgisterAnchor.href = ''
        loginResgisterAnchor.innerText = 'Register'
        loginForm.appendChild(loginResgisterAnchor)

        //SE CREA EL BODY Y SE LE AÑADEN LOS HIJOS
        var body = document.querySelector('body')
        body.appendChild(logInSection)

        loginForm.addEventListener('submit', function (event) {
            event.preventDefault()

            var username = loginUsernameInput.value
            var password = logInPasswordInput.value

            var loggedUser = { username: username, password: password }
            loggedInUser = loggedUser

            for (i = 0; i < users.length; i++) {
                var currentUser = users[i]
                if (currentUser.username === loggedInUser.username) {

                    if (currentUser.password === loggedInUser.password) {
                        loginForm.reset()

                        logInSection.remove()

                        //----- HOME SECTION -----  
                        var homeSection = document.createElement('section')

                        var homeTitle = document.createElement('h2')
                        homeTitle.innerText = 'HOME'
                        homeSection.appendChild(homeTitle)

                        var welcomeText = document.createElement('h3')
                        homeSection.appendChild(welcomeText)
                        welcomeText.innerText = 'Welcome, ' + loggedInUser.username + '!'

                        var logoutButton = document.createElement('button')
                        homeSection.appendChild(logoutButton)
                        logoutButton.innerText = 'Log Out'
                        logoutButton.type = 'submit'
                        logoutButton.id = 'but'

                        logoutButton.addEventListener('click', function (event) {
                            event.preventDefault()

                            loggedInUser = null

                            homeSection.remove()
                            body.appendChild(logInSection)
                        })
                        loginForm.reset()
                        body.appendChild(homeSection)
                        return
                    }
                    else {
                        passwordInput.value = ''
                        throw alert('Incorrect password')
                    }
                }
            }
            logInForm.reset()
            throw alert('User not found!')
        })




        //FUNCION QUE TIENE LUGAR AL PULSAR EL ANCHOR 'REGISTER'
        loginResgisterAnchor.onclick = function (event) {
            event.preventDefault();

            loginForm.reset()
            logInSection.remove()

            //----- REGISTER SECTION -----  
            var registerSection = document.createElement('section')
            var registerTitle = document.createElement('h2')
            registerTitle.innerText = 'Register'
            registerSection.appendChild(registerTitle)

            //FORMULARIO DEL REGISTER
            var registerForm = document.createElement('form')
            registerSection.appendChild(registerForm)


            //REGISTER NAME LABEL 
            var registerNameLabel = document.createElement('label')
            registerForm.appendChild(registerNameLabel)
            registerNameLabel.htmlFor = 'name'
            registerNameLabel.innerText = 'Name'

            //REGISTER NAME INPUT 
            var registerNameInput = document.createElement('input')
            registerNameInput.required = true
            registerForm.appendChild(registerNameInput)
            registerNameInput.type = 'text'
            registerNameInput.id = 'Name'

            //REGISTER EMAIL LABEL 
            var registerEmailLabel = document.createElement('label')
            registerForm.appendChild(registerEmailLabel)
            registerEmailLabel.htmlFor = 'email'
            registerEmailLabel.innerText = 'E-mail'

            //REGISTER EMAIL INPUT 
            var registerEmailInput = document.createElement('input')
            registerEmailInput.required = true
            registerForm.appendChild(registerEmailInput)
            registerEmailInput.type = 'email'
            registerEmailInput.id = 'Email'
            // registerEmailInput.required

            //REGISTER USERNAME LABEL 
            var registerUsernameLabel = document.createElement('label')
            registerForm.appendChild(registerUsernameLabel)
            registerUsernameLabel.htmlFor = 'text'
            registerUsernameLabel.innerText = 'Username'

            //REGISTER USERNAME INPUT 
            var registerUsernameInput = document.createElement('input')
            registerUsernameInput.required = true
            registerForm.appendChild(registerUsernameInput)
            registerUsernameInput.type = 'text'
            registerUsernameInput.id = 'username'

            //REGISTER PASSWORD LABEL 
            var registerPasswordLabel = document.createElement('label')
            registerForm.appendChild(registerPasswordLabel)
            registerPasswordLabel.htmlFor = 'password'
            registerPasswordLabel.innerText = 'Password'

            //REGISTER PASSWORD INPUT 
            var registerPasswordInput = document.createElement('input')
            registerPasswordInput.required = true
            registerForm.appendChild(registerPasswordInput)
            registerPasswordInput.type = 'password'
            registerPasswordInput.id = 'password'

            //REGISTER PASSWORD2 LABEL 
            var registerPasswordRepeatLabel = document.createElement('label')
            registerForm.appendChild(registerPasswordRepeatLabel)
            registerPasswordRepeatLabel.htmlFor = 'password'
            registerPasswordRepeatLabel.innerText = 'Repeat Password'

            //REGISTER PASSWORD2 INPUT 
            var registerPasswordRepeatInput = document.createElement('input')
            registerPasswordRepeatInput.required = true
            registerForm.appendChild(registerPasswordRepeatInput)
            registerPasswordRepeatInput.type = 'password'
            registerPasswordRepeatInput.id = 'password'


            //REGISTER SUBMIT BUTTON    
            var registerButton = document.createElement('button')
            registerForm.appendChild(registerButton)
            registerButton.innerText = 'Register'
            registerButton.type = 'submit'
            registerButton.id = 'but'

            //HACEMOS REGISTER DEL USER Y GUARDAMOS SUS DATOS
            registerForm.addEventListener('submit', function (event) {
                event.preventDefault()

                var name = registerNameInput.value
                var email = registerEmailInput.value
                var username = registerUsernameInput.value
                var password = registerPasswordInput.value
                var passwordRepeat = registerPasswordRepeatInput.value

                var newUser = { name: name, email: email, username: username, password: password }

                for (i = 0; i < users.length; i++) {
                    var user = users[i]

                    if (newUser.username === user.username) {
                        throw alert('Username already exists')

                        return
                    }

                    if (newUser.email === user.email) {
                        throw alert('Email already exists')

                        return
                    }
                }

                if (password2 !== password) {
                    passwordInput.value = ''
                    password2Input.value = ''
                    throw alert('Password does not match!')
                }
                else {
                    users.push(newUser)

                    registerForm.reset()

                    registerSection.remove()
                    body.appendChild(logInSection)
                }
            })

            //REGISTER LOGIN ANCHOR 
            var registerLoginAnchor = document.createElement('a')
            registerLoginAnchor.href = ''
            registerLoginAnchor.innerText = 'Login'
            registerForm.appendChild(registerLoginAnchor)

            body.appendChild(registerSection)

            //anchor hacia el login
            registerLoginAnchor.onclick = function (event) {
                event.preventDefault()

                registerSection.remove()
                body.appendChild(logInSection)
            }

        }
    </script>

</body>

</html>