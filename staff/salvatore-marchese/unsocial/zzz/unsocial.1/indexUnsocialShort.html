<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UN$OC14L</title>
  <link rel="shortcut icon"
    href="https://cdn.vectorstock.com/i/500p/00/40/creative-hidden-hacker-logo-vector-22540040.jpg" type="image/x-icon">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tiny5&display=swap');

    :root {
      --color: lime;
      --font: 'Tiny5';
      font-family: var(--font);
    }

    body {
      background-color: dimgray;
      color: var(--color);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-size: 100px;
      margin: 20px;
      text-align: center;
    }

    h2 {
        font-size: 30px;
        color: yellow;
        display: flex;
        flex-direction: row;
        justify-content: center;
    }

    img {
        height: 200px;
        width: 200px;
        border-radius: 50%;
        padding-bottom: 0;
        padding-left: 200px;
        padding-right: 200px;
        padding-top: 0;
    }

    a:visited {
      color: yellow;
    }

    #login-section {
      padding: 50px; 
      width: 300px;
      margin: 0 auto;
    }

    #register-section {
      padding: 50px; 
      width: 300px;
      margin: 0 auto;
    }

    #home-section {
      padding: 50px; 
      width: 300px;
      margin: 0 auto;
    }

    form {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 300px;
        border: 5px solid black;
        padding: 10px 0 0 0 ;
        margin: 50px auto;
        }
    

    label {
        margin-bottom: 10px;
        font-weight: bold;
    }

    input {
      background-color: gainsboro;
      font-family: inherit;
      margin-bottom: 15px;
      padding: 2px;
      width: 50%;
      box-sizing: border-box;
    }

    button {
        padding: 10px;
        width: 100px;
        margin: 40px;
    }

  </style>
</head>


<body>
  <h1>UN$OC14L</h1>

  <img src="https://m.media-amazon.com/images/I/71xJJ9FRJ9L._AC_UF894,1000_QL80_.jpg">

  <section div="login-section">
    <h2>Login</h2>

    <form>
      <label for="username">Username</label>
      <input type="text" id="username" />

      <label for="password">Password</label>
      <input type="password" id="password" />

      <button type="submit">Login</button>
    </form>

    <a href="">Register</a>
  </section>

  <section div="register-section">
    <h2>Register</h2>

    <form>
      <label for="name">Name</label>
      <input type="text" id="name" />

      <label for="email">Email</label>
      <input type="email" id="email" />

      <label for="username">Username</label>
      <input type="text" id="username" />

      <label for="password">Password</label>
      <input type="password" id="password" />

      <button type="submit">Register</button>
    </form>

    <a href="">Login</a>
  </section>

  <section div="home-section">
    <h2>Home</h2>

    <h3>Hello, User!</h3>
    <form>
      <button type="submit">Logout</button>
    </form>

  </section>

  <script>

    var users = [
      { name: 'Forrest Gump', email: 'forrest_gump@runner.com', username: 'runner4life', password: '123123123' },
      { name: 'Luke Skywalker', email: 'luke_skywalker@maythe4th.com', username: 'orphan4life', password: 'urnotmyfather' },
      { name: 'Valentino Rossi', email: 'vr46@gmail.com', username: 'VR46', password: '46464646'},
      { name: 'Mario', email: 'mariobro@gmail.com', username: 'SuperMario', password: '12341234'},
      { name: 'Maria', email: 'maria@gmail.com', username: 'Marieta', password: '07120712'},
    ]

// label and input
function buildFormFiled(id, text, type) {
    var label = document.createElement('label')
    label.htmlFor = id
    label.innerHTML = text

    var input = document.createElement('input')
    input.type = type
    input.innerText = id 

    return [label, input]
}

//build button
function buildButton(text, type) {
    var button = document.createElement('button')
    button.type = type
    button.innerText = text

    return button
}
//login
function buildLoginSection() {
    var section = document.createElement('section')

    var title = document.createElement('h2')
    title.innerText = 'Login'
    section.appendChild(title)

    var form = document.createElement('form')
    section.appendChild(form)

    var usernameField = document.buildFormElement('username', 'Username', 'text')
    form.appendChild(usernameField[0])
    form.appendChild(usernameField[1])

    var passwordField = document.buildFormElement('password','Password', 'text')
    form.appendChild(passwordField[0])
    form.appendChild(passwordField[1])

    var submitButton = buildButton('Login', 'submit')
    form.appendChild(submitButton)

    form.addEventListener('submit', function (event) {
        event.preventDefault()

        var username = usernameField[1].value
        var password = usernameField[1].value

        try {
            loggedInUser = authenticateUser(username, password)

            form.reset()

            section.remove()

            var homeSection = buildHomeSection()

            body.appendChild(homeSection)
        } catch (error) {
            passwordField[1].value = ''

            alert(error.message)

            console.error(error)
        }
    })

    //registration link
    var registerLink = document.createElement('a')
    registerLink.href = ''
    registerLink.innerText = 'Register'
    section.appendChild(registerLink)

    registerLink.addEventListener('click', function (event) {
        event.preventDefault()

        section.remove()

        var registerSection = buildRegisterSection()

        body.appendChild(registerSection)
    })

    return section
}

//register section
function buildRegisterSection() {
    var section = document.createElement('section')

    var title = document.createElement('h2')
    title.innerText = 'Register'
    section.appendChild(title)

    var form = document.createElement('form')
    section.appendChild(form)

    var nameField = buildFormFiled('name', 'Name', 'text')
    form.appendChild(nameField[0])
    form.appendChild(nameField[1])

    var emailField = buildFormField('email', 'E-mail', 'email')
    form.appendChild(emailField[0])
    form.appendChild(emailField[1])

    var usernameField = buildFormField('username', 'Username', 'text')
    form.appendChild(usernameField[0])
    form.appendChild(usernameField[1])

    var passwordField = buildFormField('password', 'Password', 'password')
    form.appendChild(passwordField[0])
    form.appendChild(passwordField[1])

    var passwordRepeatField = buildFormField('password-repeat', 'Repeat Password', 'password')
    form.appendChild(passwordRepeatField[0])
    form.appendChild(passwordRepeatField[1])

    var submitButton = buildButton('Register', 'submit')
    form.appendChild(submitButton)

    form.addEventListener('submit', function (event) {
        event.preventDefault()

        var name = nameField[1].value
        var email = emailField[1].value
        var username = usernameField[1].value
        var password = passwordField[1].value
        var passwordRepeat = passwordRepeatField[1].value

        try {
            registerUser(name, email, username, password, passwordRepeat)

            form.reset()

            section.remove()

            body.appendChild(loginSection)
        } catch (error) {
            alert(error.message)

            console.error(error)
        }
    })

    //login link
    var loginLink = document.createElement('a')
    loginLink.href = ''
    loginLink.innerText = 'Login'
    section.appendChild(loginLink)

    loginLink.addEventListener('click', function (event) {
        event.preventDefault()

        section.remove()
        body.appendChild(loginSection)
    })

    return section
}

//build home section by components
function buildHomeSection() {
    var section = document.createElement('section')

    var title = document.createElement('h2')
    title.innerText = 'Home'
    section.appendChild(title)

    var userTitle = document.createElement('h3')
    userTitle.innerText = 'Hello, ' + loggedInUser.name + '!'
    section.appendChild(userTitle)

    var logoutButton = buildButton('Logout', 'button')
    section.appendChild(logoutButton)

    logoutButton.addEventListener('click', function (event) {
        event.preventDefault()

        loggedInUser = null

        section.remove()

        body.appendChild(loginSection)
    })

    return section
}
//work in progress
   /* var sections = document.querySelectorAll('section')

var loginSection = sections[0]
loginSection.style.display = ''

var registerSection = sections[1]
registerSection.style.display = 'none'

var homeSection = sections[2]
homeSection.style.display = 'none'

var anchors = document.querySelectorAll('a')

var registerAnchor = anchors[0]
registerAnchor.addEventListener('click', function (event) {
  event.preventDefault()

  loginSection.style.display = 'none'
  registerSection.style.display = ''
})

var loginAnchor = anchors[1]
loginAnchor.addEventListener('click', function (event) {
  event.preventDefault()

  registerSection.style.display = 'none'
  loginSection.style.display = ''
})

var forms = document.querySelectorAll('form')

var loginForm = forms[0]

loginForm.addEventListener('submit', function (event) {
  event.preventDefault()

  var loginInputs = loginForm.querySelectorAll('input')

  var usernameLoginInput = loginInputs[0]
  var loginUsername = usernameLoginInput.value

  var passwordLoginInput = loginInputs[1]
  var loginPassword = passwordLoginInput.value

 
  // Encontrar al usuario con el método find
const user = users.find(u => u.username === loginUsername);

if (user) {
  // Verificar si la contraseña es correcta
  if (user.password === loginPassword) {
    loginSection.style.display = 'none';
    homeSection.style.display = '';
    loginForm.reset();
    document.querySelector('h3').textContent = 'Hello, ' + user.name;
    return;
  } else {
    alert('Incorrect password');
    return;
  }
} else {
  alert('User not found');
  return;
}

function login() {
// Obtener el nombre de usuario desde el input
var username = document.getElementById("username").value;
            
// Si el campo no está vacío, actualiza el saludo
if (username) {
document.getElementById("greeting").innerHTML = "Hello, " + username;
        }
    }
})



var registerForm = forms[1]

registerForm.addEventListener('submit', function (event) {
  event.preventDefault()

  var inputs = registerForm.querySelectorAll('input')

  var nameInput = inputs[0]
  var name = nameInput.value

  var emailInput = inputs[1]
  var email = emailInput.value

  var usernameInput = inputs[2]
  var username = usernameInput.value

  var passwordInput = inputs[3]
  var password = passwordInput.value

  var user = { name: name, email: email, username: username, password: password }

  users.push(user)

  registerForm.reset()

  registerSection.style.display = 'none'
  loginSection.style.display = ''
})

var homeForm = forms[2]

homeForm.addEventListener('submit', function (event) {
  event.preventDefault()
  loginSection.style.display = ''
  homeSection.style.display = 'none'
})
*/
</script>
</body>

</html>