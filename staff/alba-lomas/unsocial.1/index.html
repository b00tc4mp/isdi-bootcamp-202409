<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unsocial</title>
    <link rel="shortcut icon"
        href="data:image/png;base64,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"
        type="image/x-icon">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Updock&display=swap');


        :root {
            --color: rgb(128, 175, 128);
            --font: 'Dancing Script';
            font-family: var(--font);
        }

        body {
            background-color: rgb(219, 224, 224);
            color: var(--color);
        }

        input {
            background-color: inherit;
            font-family: inherit;
        }

        a:visited {
            color: var(--color);
        }
    </style>
</head>

<script src="data.js"></script>
<script src="logic.js"></script>

<body>
    <h1>Unsocial</h1>

    <script>
        /*
        En los script de data y logic se ponen en ese orden porque:
        - logic depende de data, por lo cual data ha de cargar primero.
        - la presentacion depende de logic y logic de data.
        */



        // PRESENTATION ( Es la parte que maneja la parte visual)

        var loggedInUser = null

        var loginSection = document.createElement('section')

        var loginTitle = document.createElement('h2')
        loginTitle.innerText = 'Login'
        loginSection.appendChild(loginTitle)

        var loginForm = document.createElement('form')
        loginSection.appendChild(loginForm)



        var loginUsernameLabel = document.createElement('label')
        loginUsernameLabel.htmlFor = 'username'
        loginUsernameLabel.innerText = 'Username'
        loginForm.appendChild(loginUsernameLabel)

        var loginUsernameInput = document.createElement('input')
        loginUsernameInput.type = 'text'
        loginUsernameInput.id = 'username'
        loginForm.appendChild(loginUsernameInput)



        var loginPasswordLabel = document.createElement('label')
        loginPasswordLabel.htmlFor = 'password'
        loginPasswordLabel.innerText = 'Password'
        loginForm.appendChild(loginPasswordLabel)

        var loginPasswordInput = document.createElement('input')
        loginPasswordInput.type = 'password'
        loginPasswordInput.id = 'password'
        loginForm.appendChild(loginPasswordInput)



        var loginSubmitButton = document.createElement('button')
        loginSubmitButton.type = 'submit'
        loginSubmitButton.innerText = 'Login'
        loginForm.appendChild(loginSubmitButton)



        loginForm.addEventListener('submit', function (event) {
            event.preventDefault()

            var username = loginUsernameInput.value
            var password = loginPasswordInput.value

            try { // si la funcion authenticateUser funciona, sigue el try.
                loggedInUser = authenticateUser(username, password)

                loginForm.reset()

                loginSection.remove()

                var homeSection = document.createElement('section')

                var homeTitle = document.createElement('h2')
                homeTitle.innerText = 'Home'
                homeSection.appendChild(homeTitle)

                var homeUserTitle = document.createElement('h3')
                homeUserTitle.innerText = 'Hello, ' + loggedInUser.name + '!'
                homeSection.appendChild(homeUserTitle)

                var homeLogoutButton = document.createElement('button')
                homeLogoutButton.innerText = 'Logout'
                homeSection.appendChild(homeLogoutButton)

                homeLogoutButton.addEventListener('click', function (event) {
                    event.preventDefault()

                    loggedInUser = null

                    homeSection.remove()

                    body.appendChild(loginSection)
                })

                body.appendChild(homeSection)
            } catch (error) { // si el try no est√† bien lanzamos un error.
                alert(error.message) // y nos muestra el error.

                console.log.error(error) // ponemos el console para que muestre en la consola donde esta el error.
            }
        })

        var loginRegisterLink = document.createElement('a')
        loginRegisterLink.href = ''
        loginRegisterLink.innerText = 'Register'
        loginSection.appendChild(loginRegisterLink)

        loginRegisterLink.addEventListener('click', function (event) {
            event.preventDefault()

            loginSection.remove()

            var registerSection = document.createElement('section')

            var registerTitle = document.createElement('h2')
            registerTitle.innerText = 'Register'
            registerSection.appendChild(registerTitle)

            var registerForm = document.createElement('form')
            registerSection.appendChild(registerForm)



            var registerNameLabel = document.createElement('label')
            registerNameLabel.htmlFor = 'name'
            registerNameLabel.innerText = 'Name'
            registerForm.appendChild(registerNameLabel)

            var registerNameInput = document.createElement('input')
            registerNameInput.type = 'text'
            registerNameInput.id = 'name'
            registerForm.appendChild(registerNameInput)



            var registerEmailLabel = document.createElement('label')
            registerEmailLabel.htmlFor = 'email'
            registerEmailLabel.innerText = 'E-mail'
            registerForm.appendChild(registerEmailLabel)

            var registerEmailInput = document.createElement('input')
            registerEmailInput.type = 'email'
            registerEmailInput.id = 'email'
            registerForm.appendChild(registerEmailInput)



            var registerUsernameLabel = document.createElement('label')
            registerUsernameLabel.htmlFor = 'username'
            registerUsernameLabel.innerText = 'Username'
            registerForm.appendChild(registerUsernameLabel)

            var registerUsernameInput = document.createElement('input')
            registerUsernameInput.type = 'text'
            registerUsernameInput.id = 'username'
            registerForm.appendChild(registerUsernameInput)



            var registerPasswordLabel = document.createElement('label')
            registerPasswordLabel.htmlFor = 'password'
            registerPasswordLabel.innerText = 'Password'
            registerForm.appendChild(registerPasswordLabel)

            var registerPasswordInput = document.createElement('input')
            registerPasswordInput.type = 'password'
            registerPasswordInput.id = 'password'
            registerForm.appendChild(registerPasswordInput)



            var registerPasswordRepeatLabel = document.createElement('label')
            registerPasswordRepeatLabel.htmlFor = 'password-repeat'
            registerPasswordRepeatLabel.innerText = 'Repeat Password'
            registerForm.appendChild(registerPasswordRepeatLabel)

            var registerPasswordRepeatInput = document.createElement('input')
            registerPasswordRepeatInput.type = 'password'
            registerPasswordRepeatInput.id = 'password-repeat'
            registerForm.appendChild(registerPasswordRepeatInput)



            var registerSubmitButton = document.createElement('button')
            registerSubmitButton.type = 'submit'
            registerSubmitButton.innerText = 'Register'
            registerForm.appendChild(registerSubmitButton)



            registerForm.addEventListener('submit', function (event) {
                event.preventDefault()

                var name = registerNameInput.value
                var email = registerEmailInput.value
                var username = registerUsernameInput.value
                var password = registerPasswordInput.value
                var passwordRepeat = registerPasswordRepeatInput.value

                /* el try catch no solo captura un error (como el return), tambien hace algo con el. */

                try { // si se cumple lo de abajo sigue.
                    registerUser(name, email, username, password, passwordRepeat)

                    registerForm.reset()

                    registerSection.remove()

                    body.appendChild(loginSection)
                } catch (error) { // si no se cumple de lo arriba se rompe y viene aqui.
                    alert(error.message) // y nos muestra el error.

                    console.log.error(error)  // ponemos el console para que muestre en la consola donde esta el error.

                }
            })

            var registerLoginLink = document.createElement('a')
            registerLoginLink.href = ''
            registerLoginLink.innerText = 'Login'
            registerSection.appendChild(registerLoginLink)

            registerLoginLink.addEventListener('click', function (event) {
                event.preventDefault()

                registerSection.remove()
                body.appendChild(loginSection)
            })

            body.appendChild(registerSection)
        })

        var body = document.querySelector('body')
        body.appendChild(loginSection)
    </script>
</body>

</html>