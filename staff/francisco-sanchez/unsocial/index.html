<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unsocial</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
</head>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Sixtyfour&display=swap');

    :root {
        --color: #444333;
        --font: 'Sixtyfour';
        font-family: var(--font);
    }

    body {
        background-color: lightgrey;
        color: var(--color);
    }

    input {
        background-color: inherit;
        /*Significa heredado */
        font-family: inherit;
    }

    a:visited {
        color: var(--color);

    }
</style>



<body>
    <h1>Unsocial</h1>
    <section>
        <h2>Login</h2>
        <form>
            <label for="loginUsername">Username</label>
            <input type="text" id="loginUsername">
            <label for="loginPassword">Password</label>
            <input type="password" id="loginPassword">
            <button type="submit">Login</button>
        </form>
        <a href="#">Register</a>
    </section>

    <section>
        <h2>Register</h2>
        <form>
            <label for="name">Name</label>
            <input type="text" id="name">

            <label for="email">Email</label>
            <input type="email" id="email">

            <label for="username">Username</label>
            <input type="text" id="username">

            <label for="password">Password</label>
            <input type="password" id="password">

            <button type="submit">Register</button>
        </form>

        <a href="#">Login</a>
    </section>

    <section>
        <h2>Home</h2>
        <h3>Hello, User!</h3>
        <button>Logout</button>
    </section>
</body>

<script>
    //Declaramos un array de usuarios para los tests
    var users = [
        { nome: 'Roger', email: 'roger@roger.com', userName: 'roger', password: 'roger123' },
        { nome: 'Lara', email: 'lara@lara.com', userName: 'lara', password: 'lara123' },
    ]

    var loggedUser = false;

    //La primera lógica será para mostrar correctamente las vistas
    //Definición de las variables section
    var sections = document.querySelectorAll('section');

    var loginSection = sections[0];
    loginSection.style.display = '';

    var registerSection = sections[1];
    registerSection.style.display = 'none';

    var homeSection = sections[2];
    homeSection.style.display = 'none';


    //A continuación defino el identificador para los enlaces
    var anchors = document.querySelectorAll('a');
    var registerAnchor = anchors[0];
    var loginAnchor = anchors[1];


    //Aquí vienen las lógicas para cambiar las vistas
    //registerAnchor.onclick = function(event){} ** Seria lo mismo que lo de abajo
    registerAnchor.addEventListener('click', function (event) {
        event.preventDefault() //Con esto evitamos la recarga de la página por defecto

        loginSection.style.display = 'none';
        registerSection.style.display = '';
    });

    loginAnchor.addEventListener('click', function (event) {
        event.preventDefault();
        registerSection.style.display = 'none';
        loginSection.style.display = '';
    })


    //A continuación viene el tratamiento de los forms
    var forms = document.querySelectorAll('form');

    //Logica para el formulario de registro
    var registerForm = forms[1];
    registerForm.onsubmit = function (event) {
        event.preventDefault();

        var inputs = registerForm.querySelectorAll('input');

        var nameInput = inputs[0]
        var name = nameInput.value;

        var emailInput = inputs[1]
        var email = emailInput.value;

        var usernameInput = inputs[2]
        var username = usernameInput.value;

        var passwordInput = inputs[3]
        var password = passwordInput.value;

        var user = { name: name, email: email, username: username, password: password }
        console.log(user);
        users.push(user);

        registerForm.reset(); //Método para limpiar el formulario

        //Finalmente ocultamos el formulario de registro y mostramos el de login
        registerSection.style.display = 'none';
        loginSection.style.display = '';
    }

    //Lógica para el formulario de login
    var logginForm = forms[0];
    logginForm.onsubmit = function (event) {
        event.preventDefault();

        var logginInputs = logginForm.querySelectorAll('input');
        console.log(logginInputs)

        var userName = logginInputs[0].value;
        var user = userName;

        var pass = logginInputs[1].value;
        var password = pass;

        //Y ahora que hemos recuperado los valores del formulario de login procedemos con la lógica para validar el usuario
        //var existe = users.find
    }


</script>

</html>